{"version":3,"sources":["components/main/Home/brandDetail.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/createClass.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/typeof.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/inherits.js","../node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/assertThisInitialized.js","loadImg/index.js","../node_modules/_lazy-load-img@3.0.8@lazy-load-img/dist/lazy-load-img.js"],"names":["BrandDetail","inject","observer","id","this","props","match","params","home","getBrandDetail","getBrandDetailList","brandId","lazyLoad","refs","load","_this","brandData","brandDetailData","_this$props$home$bran","name","simple_desc","app_list_pic_url","data","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","ref","onClick","history","goBack","src","data-src","alt","length","map","item","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","concat","key","list_pic_url","retail_price","Component","_defineProperties","target","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","__webpack_require__","d","__webpack_exports__","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof2","obj","Symbol","iterator","constructor","_typeof","_possibleConstructorReturn","self","call","assertThisInitialized","_setPrototypeOf","p","_inherits","subClass","superClass","TypeError","create","value","_assertThisInitialized","ReferenceError","lazy_load_img__WEBPACK_IMPORTED_MODULE_0__","lazy_load_img__WEBPACK_IMPORTED_MODULE_0___default","n","element","LazyLoadImg","el","mode","time","done","position","top","right","bottom","left","before","success","classList","add","error","module","exports","classCallCheck","instance","createClass","defineProperties","_extends","assign","arguments","source","hasOwnProperty","GetTransparent","images","canvas","document","getContext","globalAlpha","w","h","width","height","toDataURL","options","undefined","querySelector","diy","backgroundSize","backgroundRepeat","backgroundPosition","start","_getTransparent","_timer","_start","clearTimeout","setTimeout","list","Array","slice","apply","querySelectorAll","forEach","dataset","LazyLoadImgState","bcr","getBoundingClientRect","mw","offsetWidth","mh","offsetHeight","window","innerWidth","innerHeight","boolX","boolY","testMeet","loadImg","_this2","img","Image","addEventListener","toBase64","backgroundImage","style","destroy","factory"],"mappings":"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","file":"static/js/5.5f2e2405.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport './index.scss'\r\nimport { NavLink } from 'react-router-dom'\r\n//图片懒加载\r\nimport lazyLoad from '../../../loadImg'\r\n@inject('home')\r\n@observer\r\n\r\nclass BrandDetail extends Component {\r\n    componentDidMount() {\r\n        let id = this.props.match.params.id;\r\n        this.props.home.getBrandDetail({ id })\r\n        this.props.home.getBrandDetailList({ brandId: id })\r\n        lazyLoad(this.refs.load)\r\n    }\r\n    render() {\r\n        if (!this.props.home.brandData) {\r\n            return null\r\n        }\r\n        if (!this.props.home.brandDetailData) {\r\n            return null\r\n        }\r\n        let { name, simple_desc, app_list_pic_url } = this.props.home.brandData\r\n        let { data } = this.props.home.brandDetailData;\r\n        return (\r\n            <div className='App_brandDetail' ref='load'>\r\n                <div className='noTabPageContent'>\r\n                    <div className='header'>\r\n                        <div className='left' onClick={() => { this.props.history.goBack() }}><i className='iconfont icon-angle-left'></i></div>\r\n                        <div className='title'>{name}</div>\r\n                        <div className='right'></div>\r\n                    </div>\r\n                    <div className='brandDetail'>\r\n                        <img src='https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/tam-ogel/8bc5c8ca3da4043fc6c9dbfb32d5dc89_121_121.jpg' data-src={app_list_pic_url} alt='' />\r\n                        {/* <img src={app_list_pic_url} alt='' /> */}\r\n                        <div className='breadDesc'>{simple_desc}</div>\r\n                    </div>\r\n                    <div className='brandGoodsList'>\r\n                        <div className='goodsListWrap'>\r\n                            <div className='goodsList'>\r\n                                {\r\n                                    data.length !== 0 ? data.map(item => {\r\n                                        return (<NavLink to={`/goods/${item.id}`} className='goodsItem' key={item.id}>\r\n                                            <div className='goodsItemImg'>\r\n                                                <img src='https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/tam-ogel/8bc5c8ca3da4043fc6c9dbfb32d5dc89_121_121.jpg' data-src={item.list_pic_url} alt='' />\r\n                                                {/* <img src={item.list_pic_url} alt='' /> */}\r\n                                            </div>\r\n                                            <div className='goodsItemName'>{item.name}</div>\r\n                                            <div className='goodsItemPrice'>￥{item.retail_price}元</div>\r\n                                        </NavLink>)\r\n                                    }) : null\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BrandDetail\r\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import LazyLoadImg from 'lazy-load-img'\r\nconst lazyLoad = element => {\r\n    return new LazyLoadImg({\r\n        el: element,\r\n        mode: 'default', //默认模式，将显示原图，diy模式，将自定义剪切，默认剪切居中部分\r\n        time: 300, // 设置一个检测时间间隔\r\n        done: true, //页面内所有数据图片加载完成后，是否自己销毁程序，true默认销毁，false不销毁\r\n        position: { // 只要其中一个位置符合条件，都会触发加载机制\r\n            top: 0, // 元素距离顶部\r\n            right: 0, // 元素距离右边\r\n            bottom: 0, // 元素距离下面\r\n            left: 0 // 元素距离左边\r\n        },\r\n        before: function () {\r\n    \r\n        },\r\n        success: function (el) {\r\n            el.classList.add('success')\r\n        },\r\n        error: function (el) {\r\n            el.src = './images/error.png'\r\n        }\r\n    })\r\n}\r\nexport default lazyLoad","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.LazyLoadImg = factory();\n})(this, function () {\n  'use strict';\n\n  var testMeet = function testMeet(el) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; // 取得元素在可视区的位置（相对浏览器视窗）左右上下\n\n    var bcr = el.getBoundingClientRect(); // padding+border+width\n\n    var mw = el.offsetWidth; // 元素自身宽度\n\n    var mh = el.offsetHeight; // 元素自身的高度\n    // 包含了导航栏\n\n    var w = window.innerWidth; // 视窗的宽度\n\n    var h = window.innerHeight; // 视窗的高度\n\n    var boolX = !(bcr.right - options.left <= 0 && bcr.left + mw - options.left <= 0) && !(bcr.left + options.right >= w && bcr.right + options.right >= mw + w); // 左右符合条件\n\n    var boolY = !(bcr.bottom - options.top <= 0 && bcr.top + mh - options.top <= 0) && !(bcr.top + options.bottom >= h && bcr.bottom + options.bottom >= mh + h); // 上下符合条件\n\n    return el.width !== 0 && el.height !== 0 && boolX && boolY;\n  };\n\n  var classCallCheck = function classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  var GetTransparent = function () {\n    function GetTransparent() {\n      classCallCheck(this, GetTransparent);\n      this.images = {};\n      this.canvas = document.createElement('canvas');\n      this.canvas.getContext('2d').globalAlpha = 0.0;\n    }\n\n    createClass(GetTransparent, [{\n      key: 'toBase64',\n      value: function toBase64(src, w, h) {\n        if (this.images[src]) return this.images[src];\n        this.canvas.width = w;\n        this.canvas.height = h;\n        var data = this.canvas.toDataURL('image/png');\n        this.images[src] = data;\n        return data;\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.images = null;\n        this.canvas = null;\n      }\n    }]);\n    return GetTransparent;\n  }();\n\n  var LazyLoadImg = function () {\n    // 构造函数 初始化参数\n    function LazyLoadImg() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      classCallCheck(this, LazyLoadImg);\n      this.options = {\n        el: document.querySelector('body'),\n        // 选择的元素\n        mode: 'default',\n        // 默认模式，将显示原图，diy模式，将自定义剪切，默认剪切居中部分\n        time: 300,\n        // 设置一个检测时间间隔\n        done: true,\n        // 页面内所有数据图片加载完成后，是否自己销毁程序，true默认销毁，false不销毁：FALSE应用场景：页面异步不断获取数据的情况下 需要实时监听则不销毁\n        diy: {\n          // 此属性，只有在设置diy 模式时才生效\n          backgroundSize: 'cover',\n          backgroundRepeat: 'no-repeat',\n          backgroundPosition: 'center center'\n        },\n        position: {\n          // 只要其中一个位置符合条件，都会触发加载机制\n          top: 0,\n          // 元素距离顶部\n          right: 0,\n          // 元素距离右边\n          bottom: 0,\n          // 元素距离下面\n          left: 0 // 元素距离左边\n\n        },\n        before: function before(el) {// 图片加载之前，执行钩子函数\n        },\n        success: function success(el) {// 图片加载成功，执行钩子函数\n        },\n        error: function error(el) {// 图片加载失败，执行的钩子函数\n        }\n      }; // 深拷贝 如果都有 则右面的值 option.position会覆盖this.options.position\n\n      options.position = _extends({}, this.options.position, options.position);\n      options.diy = _extends({}, this.options.diy, options.diy);\n\n      _extends(this.options, options);\n\n      this.start();\n    }\n\n    createClass(LazyLoadImg, [{\n      key: 'start',\n      value: function start() {\n        if (!this._getTransparent) {\n          this._getTransparent = new GetTransparent();\n        }\n\n        this._timer = true;\n\n        this._start();\n      }\n    }, {\n      key: '_start',\n      value: function _start() {\n        var _this = this;\n\n        var options = this.options;\n        clearTimeout(this._timer); // 清除定时器\n\n        if (!this._timer) return;\n        this._timer = setTimeout(function () {\n          var list = Array.prototype.slice.apply(options.el.querySelectorAll('[data-src]'));\n          if (!list.length && options.done) return clearTimeout(_this._timer);\n          list.forEach(function (el) {\n            if (!el.dataset.LazyLoadImgState && testMeet(el, options.position)) {\n              _this.loadImg(el);\n            }\n          });\n\n          _this._start();\n        }, options.time);\n      }\n    }, {\n      key: 'loadImg',\n      value: function loadImg(el) {\n        var _this2 = this; // 加载图片\n\n\n        var options = this.options;\n        el.dataset.LazyLoadImgState = 'start';\n        options.before.call(this, el);\n        var img = new window.Image();\n        img.src = el.dataset.src; // 图片加载成功\n\n        img.addEventListener('load', function () {\n          if (options.mode === 'diy') {\n            el.src = _this2._getTransparent.toBase64(el.src, el.width, el.height);\n            options.diy.backgroundImage = 'url(' + img.src + ')';\n\n            _extends(el.style, options.diy);\n          } else {\n            el.src = img.src;\n          }\n\n          delete el.dataset.src;\n          delete el.dataset.LazyLoadImgState;\n          return options.success.call(_this2, el);\n        }, false); // 图片加载失败\n\n        img.addEventListener('error', function () {\n          delete el.dataset.src;\n          delete el.dataset.LazyLoadImgState;\n          options.error.call(_this2, el);\n        }, false);\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        // 解除事件绑定\n        delete this._timer;\n\n        this._getTransparent.destroy();\n\n        this._getTransparent = null;\n      }\n    }]);\n    return LazyLoadImg;\n  }();\n\n  return LazyLoadImg;\n});"],"sourceRoot":""}